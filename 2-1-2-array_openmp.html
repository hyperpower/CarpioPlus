
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" />
    <title>2.2.1. Array Openmp &#8212; Carpio 0.0.1 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="2.2.2. Jacobi Solver" href="2-3-1-jacobi_solver.html" />
    <link rel="prev" title="2.2. Algebra Examples" href="algebra.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Carpio</a></h1>






<p>
<iframe src="https://ghbtns.com/github-btn.html?user=hyperpower&repo=CarpioPlus&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>






  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">2.2.1. Array Openmp</a><ul>
<li><a class="reference internal" href="#problem-description">2.2.1.1. Problem Description</a></li>
<li><a class="reference internal" href="#time-test">2.2.1.2. Time Test</a></li>
<li><a class="reference internal" href="#array-operation-test">2.2.1.3. Array Operation Test</a></li>
<li><a class="reference internal" href="#case-information">2.2.1.4. Case Information</a></li>
</ul>
</li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="array-openmp">
<h1>2.2.1. Array Openmp<a class="headerlink" href="#array-openmp" title="Permalink to this headline">¶</a></h1>
<div class="section" id="problem-description">
<h2>2.2.1.1. Problem Description<a class="headerlink" href="#problem-description" title="Permalink to this headline">¶</a></h2>
<p>This test case just illustrates how to use OpenMP. The prefromence test has been carried out for comparsion. Note that the perfromence may highly depend on hardware platform. This test program could get different results on an other computer.</p>
</div>
<div class="section" id="time-test">
<h2>2.2.1.2. Time Test<a class="headerlink" href="#time-test" title="Permalink to this headline">¶</a></h2>
<p>OpenMP takes some time to allocate the threads and manage them. This procedure will spend some time. Compare to the time for runing simple task, the time used for managing threads can’t not be ignored. Here, we want to find out what kind of task is suitalbe for paralleling in terms of excution time. A simple sleep funtion is used as single task function. Multiple threads, say n threads, will execut the function n times. If they are runing in prefect parallel, the execution time time will be as same as the single thread running the funtion for just one time.</p>
<p>We set the number of threads, n = 2, 4, 8, 16. The result is shown in following Figure.</p>
<div class="figure align-center" id="id1">
<img alt="Time test for OpenMP" src="_images/timetest.png" />
<p class="caption"><span class="caption-number">Fig. 2.21 </span><span class="caption-text">Time test for OpenMP</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
<p>Two obvious conclusions can be reached:</p>
<ul class="simple">
<li><p>More threads will take more time to manage.</p></li>
<li><p>Execution time of single function is better be more than 10 millisecond.</p></li>
</ul>
</div>
<div class="section" id="array-operation-test">
<h2>2.2.1.3. Array Operation Test<a class="headerlink" href="#array-operation-test" title="Permalink to this headline">¶</a></h2>
<p>A simple array operation(+,-,*) execute in parallel. Following figure shows the result. The operation is acted on arrays with different length. The longer array takes more time to operate. The execution time should be longer than 10 ms. The parallel execution could save time.</p>
<div class="figure align-center" id="id2">
<img alt="arrar test for OpenMP" src="_images/arrayop.png" />
<p class="caption"><span class="caption-number">Fig. 2.22 </span><span class="caption-text">Array test for OpenMP</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="case-information">
<h2>2.2.1.4. Case Information<a class="headerlink" href="#case-information" title="Permalink to this headline">¶</a></h2>
<p>Run time infomation:</p>
<table class="colwidths-auto docutils align-center" id="id3">
<caption><span class="caption-number">Table 2.11 </span><span class="caption-text">Summary of Running Time.</span><a class="headerlink" href="#id3" title="Permalink to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Functions</p></th>
<th class="head"><p>Wall Time (s)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>dt_cmake</p></td>
<td><p>4.02154e+00</p></td>
</tr>
<tr class="row-odd"><td><p>dt_make</p></td>
<td><p>2.04848e+00</p></td>
</tr>
<tr class="row-even"><td><p>dt_run</p></td>
<td><p>2.85278e+01</p></td>
</tr>
<tr class="row-odd"><td><p>dt_plot</p></td>
<td><p>2.69413e-04</p></td>
</tr>
</tbody>
</table>
<table class="colwidths-auto docutils align-center" id="id4">
<caption><span class="caption-number">Table 2.12 </span><span class="caption-text">Files in this case.</span><a class="headerlink" href="#id4" title="Permalink to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>File</p></th>
<th class="head"><p>Creat Time</p></th>
<th class="head"><p>Modified Time</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>main.cpp</p></td>
<td><p>20-01-04 21:30</p></td>
<td><p>20-01-04 21:30</p></td>
</tr>
<tr class="row-odd"><td><p>CMakeLists.txt</p></td>
<td><p>19-11-24 18:50</p></td>
<td><p>19-11-24 18:50</p></td>
</tr>
<tr class="row-even"><td><p>run.py</p></td>
<td><p>19-11-24 18:50</p></td>
<td><p>19-11-24 18:50</p></td>
</tr>
<tr class="row-odd"><td><p>report.rst</p></td>
<td><p>20-01-04 21:18</p></td>
<td><p>20-01-04 21:18</p></td>
</tr>
</tbody>
</table>
</div>
</div>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;2018, Chengsi Zhou.
      
      |
      <a href="_sources/2-1-2-array_openmp.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>